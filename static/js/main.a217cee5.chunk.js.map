{"version":3,"sources":["api/api.ts","BasketContext.tsx","api/basketItems.ts","helpers.ts","Catalog.tsx","api/phones.ts","Details.tsx","Basket.tsx","App.tsx","index.tsx"],"names":["API_URL","process","get","url","a","fetch","response","json","post","data","method","body","JSON","stringify","headers","BasketContext","React","createContext","basketItems","refreshBasket","removeItem","BasketContextContainer","children","useState","setBasketItems","api","then","useEffect","contextValue","itemId","alert","Provider","value","getImageUrl","Catalog","phones","setPhones","useContext","addToBasket","phoneId","item","className","map","phone","key","id","to","alt","name","src","imageUrl","type","onClick","snippet","Details","setPhone","loadingError","setLoadingError","useParams","phonesApi","catch","images","description","image","Basket","length","App","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a217cee5.chunk.js","sourcesContent":["const API_URL = process.env.REACT_APP_API_URL;\n\nexport const get = async<T>(url: string): Promise<T> => {\n  const response = await fetch(API_URL + url);\n\n  return response.json();\n};\n\nexport const post = async(url: string, data: object) => {\n  const response = await fetch(API_URL + url, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Content-Type': 'application/json; charset=utf-8',\n    },\n  });\n\n  return response.json();\n};\n","import React, { useEffect, useState } from 'react';\nimport * as basketItemsApi from './api/basketItems';\n\ntype TBasketContext = {\n  basketItems: BasketItem[];\n  refreshBasket: () => void;\n  removeItem: (itemId: string) => void;\n}\n\nexport const BasketContext = React.createContext<TBasketContext>({\n  basketItems: [],\n  refreshBasket: () => {},\n  removeItem: () => {},\n});\n\nexport const BasketContextContainer: React.FC = ({ children }) => {\n  const [basketItems, setBasketItems] = useState<BasketItem[]>([]);\n\n  const refreshBasket = () => {\n    basketItemsApi.getAll()\n      .then(setBasketItems);\n  };\n\n  useEffect(refreshBasket, []);\n\n  const removeItem = (itemId: string) => {\n    alert(`Removing ${itemId}... Please implement`);\n  };\n\n  const contextValue = {\n    basketItems,\n    refreshBasket,\n    removeItem,\n  };\n\n  return (\n    <BasketContext.Provider value={contextValue}>\n      {children}\n    </BasketContext.Provider>\n  );\n};\n","import * as api from './api';\n\nconst BASE_URL = '/basket-items';\n\nexport const getAll = () => {\n  return api.get<BasketItem[]>(BASE_URL);\n};\n\nexport const getById = (phoneId: string) => {\n  return api.get<BasketItem>(`${BASE_URL}/${phoneId}`);\n};\n\nexport const addItem = (itemId: string) => {\n  return api.post(BASE_URL, { item: itemId });\n};\n","export const getImageUrl = (url: string) => {\n  return process.env.REACT_APP_IMAGE_PREFIX + url;\n};\n","import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport * as phonesApi from './api/phones';\nimport * as basketItemsApi from './api/basketItems';\n\nimport { BasketContext } from './BasketContext';\nimport { getImageUrl } from './helpers';\n\nconst Catalog = () => {\n  const [phones, setPhones] = useState<Phone[]>([]);\n  const { refreshBasket } = useContext(BasketContext);\n\n  useEffect(() => {\n    phonesApi.getAll()\n      .then(setPhones);\n  }, []);\n\n  const addToBasket = async(phoneId: string) => {\n    await basketItemsApi.addItem(phoneId);\n    refreshBasket();\n  };\n\n  return (\n    <>\n      <h1>Phone catalog</h1>\n\n      <ul className=\"phones\">\n        {phones.map((phone: Phone) => (\n          <li className=\"thumbnail\" key={phone.id}>\n            <Link to={`/phones/${phone.id}`} className=\"thumb\">\n              <img\n                alt={phone.name}\n                src={getImageUrl(phone.imageUrl)}\n              />\n            </Link>\n\n            <div className=\"phones__btn-buy-wrapper\">\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => addToBasket(phone.id)}\n              >\n                Add\n              </button>\n            </div>\n\n            <Link to={`/phones/${phone.id}`}>\n              {phone.name}\n            </Link>\n\n            <p>{phone.snippet}</p>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Catalog;\n","import * as api from './api';\n\nconst BASE_URL = '/phones';\n\nexport const getAll = () => {\n  return api.get<Phone[]>(BASE_URL);\n};\n\nexport const getById = (phoneId: number | string) => {\n  return api.get<TPhoneDetails>(`${BASE_URL}/${phoneId}`);\n};\n","import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport * as phonesApi from './api/phones';\nimport { getImageUrl } from './helpers';\n\ntype TRouteParams = {\n  phoneId: string;\n}\n\nconst Details = () => {\n  const [phone, setPhone] = useState<TPhoneDetails | null>(null);\n  const [loadingError, setLoadingError] = useState('');\n  const { phoneId } = useParams<TRouteParams>();\n\n  useEffect(() => {\n    phonesApi.getById(phoneId)\n      .then(setPhone)\n      .catch(setLoadingError);\n  }, [phoneId]);\n\n  if (loadingError) {\n    return <p>{loadingError}</p>;\n  }\n\n  if (!phone) {\n    return <p>Loading...</p>;\n  }\n\n  return (\n    <>\n      <img\n        className=\"phone\"\n        src={getImageUrl(phone.images[0])}\n        alt=\"phone preview\"\n      />\n\n      <h1>{phone.name}</h1>\n      <p>{phone.description}</p>\n\n      <button type=\"button\" className=\"btn btn-success\">\n        Add\n      </button>\n\n      <ul className=\"phone-thumbs\">\n        {phone.images.map(image => (\n          <li key={image}>\n            <img src={getImageUrl(image)} alt=\"thumbnail\" />\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Details;\n","import React, { useContext, useEffect } from 'react';\n\nimport { BasketContext } from './BasketContext';\n\nconst Basket = () => {\n  const { basketItems, refreshBasket, removeItem } = useContext(BasketContext);\n\n  useEffect(refreshBasket, []);\n\n  return (\n    <section>\n      <h2>Shopping Cart</h2>\n\n      {basketItems.length > 0 ? (\n        <ul>\n          {basketItems.map((item) => (\n            <li key={item}>\n              <button\n                type=\"button\"\n                onClick={() => removeItem(item)}\n              >\n                x\n              </button>\n\n              <b>{item}</b>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>No items yet</p>\n      )}\n    </section>\n  );\n};\n\nexport default Basket;\n","import React from 'react';\nimport { Route, Redirect, Switch } from 'react-router-dom';\n\nimport './App.css';\nimport Catalog from './Catalog';\nimport Details from './Details';\nimport Basket from './Basket';\n\nimport { BasketContextContainer } from './BasketContext';\n\nconst App = () => (\n  <BasketContextContainer>\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-sm-3\">\n          <section>\n            <h2>Filter</h2>\n\n            <label>\n              <div>Search:</div>\n              <input />\n            </label>\n\n            <label>\n              <div>Sort by:</div>\n              <select>\n                <option value=\"name\">Alphabetical</option>\n                <option value=\"age\">Newest</option>\n              </select>\n            </label>\n          </section>\n\n          <Basket />\n        </div>\n\n        <div className=\"col-sm-9\">\n          <Switch>\n            <Route path=\"/phones\" exact component={Catalog} />\n            <Route path=\"/phones/:phoneId\" component={Details} />\n            <Redirect to=\"/phones\" />\n          </Switch>\n        </div>\n      </div>\n    </div>\n  </BasketContextContainer>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}